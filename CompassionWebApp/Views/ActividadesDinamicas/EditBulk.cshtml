@model CompassionWebApp.Models.Tb_ActividadesBeneficiarios

@{
    ViewBag.Title = "Actividades Dinamicas - Edit Bulk";
    List<CompassionWebApp.Models.Tb_ActividadesDetalles> detallesPlantilla = (List<CompassionWebApp.Models.Tb_ActividadesDetalles>)ViewBag.detalles;
    List<CompassionWebApp.Models.Tb_Beneficiarios> lstbeneficiarios = (List<CompassionWebApp.Models.Tb_Beneficiarios>)ViewBag.grupo;

}

<!--begin::Entry--><br />
<!--begin::Entry--><br />
<div class="d-flex flex-column-fluid">

    <!--begin::Container-->
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <a href="@Url.Action("Index","ActividadesDinamicas")" class="btn btn-primary btn-sm">Volver</a>
                <!--begin::Card-->
                <!--begin::Card-->
                <div class="card card-custom">
                    <div class="card-header card-header-tabs-line">
                        <div class="card-toolbar">
                            <ul class="nav nav-tabs nav-bold nav-tabs-line">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#kt_tab_pane_1_4">
                                        <span class="nav-icon">
                                            <i class="flaticon2-file"></i>
                                        </span>
                                        <span class="nav-text">Parametros</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#kt_tab_pane_2_4">
                                        <span class="nav-icon">
                                            <i class="flaticon2-user"></i>
                                        </span>
                                        <span class="nav-text">Beneficiarios en actividad</span>
                                    </a>
                                </li>
                            </ul>
                        </div>

                    </div>
                    <div class="card-body">
                        <div class="tab-content">
                            <div class="tab-pane fade show active" id="kt_tab_pane_1_4" role="tabpanel" aria-labelledby="kt_tab_pane_1_4">


                                <div class="card card-custom gutter-b example example-compact">
                                    <div class="card-header">
                                        <h3 class="card-title">Editar actividad #@Model.ID_actividadBeneficiario</h3>
                                        <div class="card-toolbar">
                                            @*<div class="example-tools justify-content-center">
                                        <span class="example-toggle" data-toggle="tooltip" title="View code"></span>
                                        <span class="example-copy" data-toggle="tooltip" title="Copy code"></span>
                                    </div>*@
                                        </div>
                                    </div>
                                    <br /><br />

                                    <input type="hidden" id="id_actividadBenef" value="@Model.ID_actividadBeneficiario" />

                                    <div class="form-group">
                                        <label class="control-label col-md-12">CDI</label>
                                        <div class="col-md-12">
                                            <input type="text" readonly class="form-control" value="@Model.Tb_CDI.NombreCDI" />

                                        </div>
                                    </div>

                                    @*<div class="form-group">
                                <label class="control-label col-md-12">Beneficiario</label>
                                <div class="col-md-12">
                                    <input type="text" readonly class="form-control" value="@Model.Tb_Beneficiarios.AccountName" />

                                </div>
                            </div>*@


                                    <div class="form-group">
                                        <label class="control-label col-md-12">Actividad</label>
                                        <div class="col-md-12">
                                            <input type="text" readonly class="form-control" value="@Model.Tb_ActividadesSecundarias.Nombre_corto" />

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-12">Plantilla de actividad</label>
                                        <div class="col-md-12">
                                            <input type="text" readonly class="form-control" value="@ViewBag.plantilla" />
                                        </div>
                                    </div>
                                    <br /><hr />
                                    <div class="form-group">

                                        <!--Plantilla-->
                                        <h4 class="control-label col-md-12">Parametros</h4>
                                        <br />
                                        @foreach (var item_plantilla in detallesPlantilla)
                            {
                                if (item_plantilla.ID_recurso == 1)
                                {
                                    <label class="control-label col-md-12">@item_plantilla.Parametro</label>
                                    <label class="control-label col-md-12 text-muted">@item_plantilla.Descripcion</label>
                                    <div class="col-md-12">

                                        <input type="text" onchange="guardarParametro(this.id,1,@item_plantilla.ID_detalleActividad)" id="@item_plantilla.ID_detalleActividad" value="@item_plantilla.ValorTexto" class="form-control" />
                                    </div><br />
                    }
                    if (item_plantilla.ID_recurso == 2)
                    {

                        <label class="control-label col-md-12">@item_plantilla.Parametro</label>

                        <label class="control-label col-md-12 text-muted">@item_plantilla.Descripcion</label>
                        <div class="col-md-12">


                            <input id="@item_plantilla.ID_detalleActividad" type="text" class="form-control" onchange="guardarParametro(this.id,2,@item_plantilla.ID_detalleActividad)" value="@item_plantilla.ValorNumerico" name="demo0" placeholder="" />
                        </div><br />
        }
        if (item_plantilla.ID_recurso == 3)
        {
            <label class="control-label col-md-12">@item_plantilla.Parametro</label>

            <label class="control-label col-md-12 text-muted">@item_plantilla.Descripcion</label>
            <div class="col-md-12">


                <input id="@item_plantilla.ID_detalleActividad" type="text" class="form-control" onchange="guardarParametro(this.id,3,@item_plantilla.ID_detalleActividad)" value="@item_plantilla.ValorEntero" name="demo0" placeholder="" />
            </div><br />
}
if (item_plantilla.ID_recurso == 4)
{
            <label class="control-label col-md-12">@item_plantilla.Parametro</label>

            <label class="control-label col-md-12 text-muted">@item_plantilla.Descripcion</label>
            <div class="col-md-12">

                <input type="date" id="@item_plantilla.ID_detalleActividad" value="@item_plantilla.ValorTexto" onchange="guardarParametro(this.id,4,@item_plantilla.ID_detalleActividad)" class="form-control" />
            </div><br />
}
if (item_plantilla.ID_recurso == 5)
{
            <label class="control-label col-md-12">@item_plantilla.Parametro</label>

            <label class="control-label col-md-12 text-muted">@item_plantilla.Descripcion</label>
            <div class="col-md-12">
                @{ List<string> TagIds = item_plantilla.ValorTexto.Split(',').ToList();}

                <select class="form-control" id="@item_plantilla.ID_detalleActividad" onchange="guardarParametro(this.id,5,@item_plantilla.ID_detalleActividad)">
                    <option value="0">Seleccione</option>
                    @foreach (var itemsel in TagIds)
        {
            if (itemsel == item_plantilla.ValorMultipleOpciones)
            {
                <option selected>@itemsel</option>}
else
{
            <option>@itemsel</option>}

}
                </select>

            </div><br />
}
if (item_plantilla.ID_recurso == 6)
{
            <label class="control-label col-md-12">@item_plantilla.Parametro</label>

            <label class="control-label col-md-12 text-muted">@item_plantilla.Descripcion</label>
            <div class="col-md-12">
                <br /><br />
                <div id="@item_plantilla.ID_detalleActividad" class="nouislider"></div>
            </div><br />
}
}
                                    </div>

                                    <br /><hr />
                                    <div class="form-group">
                                        <label class="control-label col-md-12">Resultado</label>
                                        <div class="col-md-12">
                                            <select class="form-control" id="ID_resultado" name="ID_resultado" onChange='ObtenerPrecondiciones()'>
                                                <option value="0">Seleccione Resulado</option>
                                                @foreach (var item in ViewBag.ID_resultado)
                                    {
                                        if (Model.ID_resultado == item.ID)
                                        {
                                            <option value="@item.ID" selected>@item.Descripcion</option>}
                            else
                            {
                                <option value="@item.ID">@item.Descripcion</option>}

            }
                                            </select>

                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label col-md-12">Precondicion ToC</label>
                                        <div class="col-md-12">
                                            <select class="form-control" id="ID_precondicionTOC" name="ID_precondicionTOC">
                                                <option value="0">Seleccione Precondicion</option>
                                            </select>

                                        </div>
                                    </div>


                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Comentarios, htmlAttributes: new { @class = "control-label col-md-12" })
                                        <div class="col-md-12">
                                            <textarea class="form-control" id="Comentarios" name="Comentarios">@Model.Comentarios</textarea>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-offset-2 col-md-12">
                                            <input type="submit" value="Guardar actividad" onclick="GuardarActividad()" class="btn btn-primary" />
                                        </div>
                                    </div>


                                    <div>
                                        @Html.ActionLink("Volver", "Index")
                                    </div>
                                </div>
                                <!--end::Card-->

                            </div>
                            <div class="tab-pane fade" id="kt_tab_pane_2_4" role="tabpanel" aria-labelledby="kt_tab_pane_2_4">
                                <!--begin::Header-->

                                <div class="card-header flex-wrap border-0 pt-6 pb-0">


                                    <div class="card-title">

                                        Beneficiarios en actividad

                                    </div>

                                    <div class="card-toolbar">


                                    </div>

                                    <br /><br />

                                    <div class="input-group input-group-sm input-group-solid" style="max-width: 275px">
                                        <input type="text" class="form-control" id="kt_subheader_search_form2" placeholder="Buscar..." />
                                        <div class="input-group-append">
                                            <span class="input-group-text">
                                                <span class="svg-icon">
                                                    <!--begin::Svg Icon | path:assets/media/svg/icons/General/Search.svg-->
                                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                            <rect x="0" y="0" width="24" height="24" />
                                                            <path d="M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                                            <path d="M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z" fill="#000000" fill-rule="nonzero" />
                                                        </g>
                                                    </svg>
                                                    <!--end::Svg Icon-->
                                                </span>
                                                <!--<i class="flaticon2-search-1 icon-sm"></i>-->
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <!--end::Header-->
                                <!--begin::Body-->
                                <div class="card-body">

                                    <div class="table-responsive">
                                        <!--begin: Datatable-->
                                        <table class="table table-bordered table-checkable" id="kt_datatable2">
                                            <thead>
                                                <tr>

                                                    <th>Código Beneficiario</th>
                                                    <th>Nombre completo</th>
                                                    <th>Código CDI</th>
                                                    <th>Género</th>
                                                    <th>Edad</th>
                                                    <th>Tutor / Implementador</th>
                                                    <th>Clase / CDPR Grupo de edad</th>
                                                    <th>Estado/Provincia</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (lstbeneficiarios.Count > 0)
                                    {
                                        foreach (var items in lstbeneficiarios)
                                        {
                                            <tr>

                                                <td class="localID">@items.LocalBeneficiaryID</td>

                                                <td class="accountname">@items.AccountName</td>
                                                <td class="cdi">@items.BeneficiaryICPID</td>

                                                <td>@items.Gender</td>
                                                <td>@items.Age</td>
                                                <td>@items.Tutor_ImplementerName</td>
                                                <td>@items.Classroom_CDPRAgeGroup</td>
                                                <td>@items.State_Province</td>

                                            </tr>
                            }
                        }

                                            </tbody>
                                        </table>
                                        <!--end: Datatable-->
                                    </div>

                                </div>
                                <!--end::Body-->
                            </div>
                        </div>
                    </div>
                </div>
                <!--end::Card-->




            </div>
        </div>
    </div>
</div>


